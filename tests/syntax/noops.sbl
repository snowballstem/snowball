// Test no-op commands which should get canonicalised.
externals (stem)
integers (x y)
booleans (b)
strings (s)
define stem as (
  $x = 0
  [substring] among ( // All actions equivalent to `true`.
    '0' ()
    'a' (())
    'b' (true)
    'c' ('')
    'd' (loop 0 next)
    'e' (loop -1 next)
    'f' (hop 0)
    'g' ($x += 0)
    'h' ($x -= 0)
    'i' ($x *= 1)
    'j' ($x /= 1)

    // Values set are unused.
    'k' ($y = 1)
    'l' ($y += 1)
    'm' ($y -= 1)
    'n' ($y *= 2)
    'o' ($y /= 2)
    'p' (setmark y)
    'q' (set b)
    'r' (unset b)
    's' (-> s)

    // Integer tests.
    'A' ($(1 == 1))
    'B' ($(2 > 1))
    'C' ($(-1 < 0))
    'D' ($(-1 <= -1))
    'E' ($(0 >= 0))
    'F' ($(1 != 0))
  )
  [substring] among ( // All actions equivalent to `false`.
    '0' (false)
    'a' (fail ())
    'b' (fail true)
    'c' (fail '')
    'd' (fail loop 0 next)
    'e' (fail loop -1 next)
    'f' (fail hop 0)
    'g' (fail $x += 0)
    'h' (fail $x -= 0)
    'i' (fail $x *= 1)
    'j' (fail $x /= 1)

    // Integer tests which are always false.
    'A' ($(1 != 1))
    'B' ($(1 > 2))
    'C' ($(-1 > 0))
    'D' ($(0 <= -1))
    'E' ($(0 >= 1))
    'F' ($(1 == 0))
  )
)

